<script type="text/javascript">
    console.log("register pulsar-schema")

    RED.nodes.registerType('pulsar-schema',{
        category: 'config',
        color: '#188fff',
        icon: "font-awesome/fa-puzzle-piece",
        defaults: {
            schemaType: {value:"", required: true},
            name: {value: "", required: false },
            schema: {value: "", required: false, validate: function (v) { return true; } },
            properties: {value: "", required: false, validate: function (v) { return true; } }
        },
        label: function() {
            return this.name || "pulsar-schema";
        },
        oneditprepare: function() {

            $("#node-config-input-schemaType").typedInput({type:"schemaType", types:[{
                    value: "schemaType",
                    multiple: false,
                    options: [
                        { value: "None", label: "None"},
                        { value: "String", label: "String"},
                        { value: "Json", label: "Json"},
                        { value: "Protobuf", label: "Protobuf"},
                        { value: "Avro", label: "Avro"},
                        { value: "Boolean", label: "Boolean"},
                        { value: "Int8", label: "Int8"},
                        { value: "Int16", label: "Int16"},
                        { value: "Int32", label: "Int32"},
                        { value: "Int64", label: "Int64"},
                        { value: "Float32", label: "Float32"},
                        { value: "Float64", label: "Float64"},
                        { value: "KeyValue", label: "KeyValue"},
                        { value: "Bytes", label: "Bytes"},
                        { value: "AutoConsume", label: "AutoConsume"},
                        { value: "AutoPublish", label: "AutoPublish"}
                    ]
                }]
            });
            $("#node-config-input-schema").typedInput({
                default: 'json',
                types: ['json'],
                typeField: '#node-config-input-schema-type'
            });
            $("#node-config-input-properties").typedInput({
                default: 'json',
                types: ['json'],
                typeField: '#node-config-input-properties-type'
            });
        }
    });
</script>

<script type="text/html" data-template-name="pulsar-schema">
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-id-card"></i> Name</label>
        <input type="text" id="node-config-input-name">
    </div>
    <div class="form-row">
        <label for="node-config-input-schemaType"><i class="fa fa-file-code-o"></i> Type</label>
        <input type="text" id="node-config-input-schemaType">
    </div>
    <div class="form-row">
        <label for="node-config-input-schema"><i class="fa fa-puzzle-piece"></i> Schema</label>
        <input type="text" id="node-config-input-schema" placeholder="{}">
        <input type="hidden" id="node-config-input-schema-type">
    </div>
    <div class="form-row">
        <label for="node-config-input-properties"><i class="fa fa-list-alt"></i> Properties</label>
        <input type="text" id="node-config-input-properties" placeholder="{}">
        <input type="hidden" id="node-config-input-properties-type">
    </div>
</script>


<script type="text/markdown" data-help-name="pulsar-schema">
![Pulsar Logo](https://upload.wikimedia.org/wikipedia/commons/c/cb/Apache-pulsar-blue-logo.svg)

Configure a **Pulsar Schema**.
This configuration node can be used by `pulsar-consumer` and `pulsar-producer` nodes.

### Configuration Properties

- `Name` - The name of the schema.
- `Schema Type` - The type of the schema.
- `Schema` - The schema.
- `Properties` - The properties of the schema.

### References
- [Pulsar documentation](https://pulsar.apache.org/docs)
</script>
